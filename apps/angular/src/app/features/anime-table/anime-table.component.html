<mat-toolbar color="primary">
  <mat-toolbar-row>
    <span id="page-heading">Anime Catalog</span>
  </mat-toolbar-row>
</mat-toolbar>
<div class="mat-elevation-z8 default-layout" *ngIf="animeData$ | async as anime else loading">
  <mat-paginator
    (page)="changePage($event)"
    [length]="anime.count"
    [pageSize]="10"
    [pageIndex]="currentPage"
    showFirstLastButtons
    hidePageSize>
  </mat-paginator>
  <table
    mat-table
    [dataSource]="anime.results"
    class="anime-table"
    aria-label="anime"
    aria-describedby="page-heading">
    <ng-container matColumnDef="image">
      <th mat-header-cell *matHeaderCellDef class="anime-table__heading-cell">Image</th>
      <td mat-cell *matCellDef="let anime" class="anime-table__cell">
        <img [src]="anime.image" [alt]="anime.titleEnglish" class="anime-table__image">
      </td>
    </ng-container>
    <ng-container matColumnDef="title">
      <th mat-header-cell *matHeaderCellDef>Title</th>
      <td mat-cell *matCellDef="let anime">
        {{anime.titleEnglish || '-'}} ({{anime.titleJapanese || '-'}})
      </td>
    </ng-container>
    <ng-container matColumnDef="aired start">
      <th mat-header-cell *matHeaderCellDef>Aired start</th>
      <td mat-cell *matCellDef="let anime">
        {{anime.aired.start | date:"YYYY"}}
      </td>
    </ng-container>
    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef>Status</th>
      <td mat-cell *matCellDef="let anime">
        {{anime.status | animeStatus}}
      </td>
    </ng-container>
    <ng-container matColumnDef="type">
      <th mat-header-cell *matHeaderCellDef>Type</th>
      <td mat-cell *matCellDef="let anime">
        {{anime.type | animeType}}
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="tableColumns" class="anime-table__heading-row"></tr>
    <tr mat-row *matRowDef="let row; columns: tableColumns" class="anime-table__row"></tr>
  </table>
</div>

<ng-template #loading>
  <div class="loading-layout">
    <mat-spinner
      color="primary"
      [diameter]="120">
    </mat-spinner>
  </div>

</ng-template>
